name: Telegram NIFTY Bot

on:
  schedule:
    - cron: "30 3 * * *"
  workflow_dispatch:

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Install jq
        run: sudo apt-get update && sudo apt-get install -y jq

      - name: Get NIFTY Price and Send to Telegram
        run: |
          NIFTY=$(curl -s "https://query1.finance.yahoo.com/v7/finance/quote?symbols=%5ENSEI" | jq '.quoteResponse.result[0].regularMarketPrice')

          curl -X POST "https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage" \
          -d chat_id=${{ secrets.CHAT_ID }} \
          --data-urlencode "text=ðŸ“Š NIFTY LIVE UPDATE
          NIFTY Price: â‚¹$NIFTY
          Risk management à¤œà¤¼à¤°à¥‚à¤°à¥€ à¤¹à¥ˆ"
