from mode_brain import decide_mode, market_conditions
from stock_selector import select_stocks
from fundamental_brain import fundamental_data

mode = decide_mode(market_conditions)
stocks = select_stocks(mode)

print("ЁЯУД DAILY MARKET INTELLIGENCE REPORT")
print("===================================")
print("рдкреНрд░реЗрд╖рдХ : Ultimate Brain Market System")
print("рд╡рд┐рд╖рдп   : рдЖрдЬ рдХреЗ рдмрд╛рдЬрд╛рд░ рдХреА рд╕реНрдерд┐рддрд┐ рдПрд╡рдВ рдЪрдпрдирд┐рдд рдХрдВрдкрдирд┐рдпрд╛рдБ")
print("")

print(f"рдЖрдЬ рдХрд╛ Market Mode : {mode}")
print("")

print("рдЖрджрд░рдгреАрдп рдирд┐рд╡реЗрд╢рдХ,")
print("рдЖрдЬ рдХреЗ рдмрд╛рдЬрд╛рд░ рдХреЗ рдЖрдБрдХрдбрд╝реЛрдВ рдПрд╡рдВ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ:")
print("")

print("1. рдмрд╛рдЬрд╛рд░ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐:")
line = 1
if market_conditions["volatility"] == "HIGH":
    print(f"   {line}. рдмрд╛рдЬрд╛рд░ рдореЗрдВ рдЙрддрд╛рд░-рдЪрдврд╝рд╛рд╡ (Volatility) рдЕрдзрд┐рдХ рджреЗрдЦрд╛ рдЧрдпрд╛ рд╣реИред")
    line += 1
if market_conditions["liquidity"] == "LOW":
    print(f"   {line}. рдмрд╛рдЬрд╛рд░ рдореЗрдВ рддрд░рд▓рддрд╛ (Liquidity) рдХрдо рдкрд╛рдИ рдЧрдИ рд╣реИред")
    line += 1
if market_conditions["global_trend"] == "NEGATIVE":
    print(f"   {line}. рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрдХреЗрдд (Global Trend) рдирдХрд╛рд░рд╛рддреНрдордХ рдкрд╛рдП рдЧрдП рд╣реИрдВред")
    line += 1

print("")
print("2. рдЙрдкрд░реЛрдХреНрдд рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдВрдкрдирд┐рдпреЛрдВ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:")
print("")

count = 1
for stock in stocks:
    data = fundamental_data.get(stock, {})

    print(f"{count}. рдХрдВрдкрдиреА рдХрд╛ рдирд╛рдо : {stock}")
    print("   рдХрдВрдкрдиреА рдХрд╛ рдореВрд▓рднреВрдд рд╡рд┐рд╡рд░рдг (Fundamental Details):")
    print(f"      (i)   рд╕реЗрдХреНрдЯрд░               : {data.get('sector')}")
    print(f"      (ii)  рдХреБрд▓ рдмрд┐рдХреНрд░реА (Sales)   : {data.get('sales')}")
    print(f"      (iii) рд╢реБрджреНрдз рд▓рд╛рдн (Profit)   : {data.get('profit')}")
    print(f"      (iv)  рдХреБрд▓ рдХрд░реНрдЬ (Debt)      : {data.get('debt')}")
    print(f"      (v)   рдкреНрд░рдореЛрдЯрд░ рд╣реЛрд▓реНрдбрд┐рдВрдЧ     : {data.get('promoter_holding')}%")
    print(f"      (vi)  FII рд╣реЛрд▓реНрдбрд┐рдВрдЧ         : {data.get('fii_holding')}%")
    print(f"      (vii) рдЬреЛрдЦрд┐рдо рд╕реНрддрд░ (Risk)    : {data.get('risk')}")

    reasons = []
    if data.get("risk") == "LOW":
        reasons.append("рдХрдВрдкрдиреА рдХрд╛ рд╡реНрдпрд╡рд╕рд╛рдп рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдХрдо рдЬреЛрдЦрд┐рдо рд╡рд╛рд▓рд╛ рд╣реИ")
    if str(data.get("debt")).startswith("0"):
        reasons.append("рдХрдВрдкрдиреА рдкрд░ рдХреЛрдИ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рдХрд░реНрдЬ рдирд╣реАрдВ рд╣реИ")
    if "Cr" in str(data.get("profit")):
        reasons.append("рдХрдВрдкрдиреА рд▓рд╛рдн рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ")

    reason_text = " рддрдерд╛ ".join(reasons)

    print("   рдЪрдпрди рдХрд╛ рдХрд╛рд░рдг:")
    print(f"      тЖТ {reason_text}")
    print("------------------------------------------------------------")
    print("")
    count += 1

print("3. рдирд┐рд╖реНрдХрд░реНрд╖:")
print("рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рддрдереНрдпреЛрдВ рдПрд╡рдВ рдмрд╛рдЬрд╛рд░ рдХреА рд╡рд░реНрддрдорд╛рди рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП,")
print("рдпреЗ рдХрдВрдкрдирд┐рдпрд╛рдБ рд╡рд░реНрддрдорд╛рди Market Mode рдХреЗ рдЕрдВрддрд░реНрдЧрдд рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдЙрдкрдпреБрдХреНрдд рдорд╛рдиреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред")
print("")
print("рдпрд╣ рд░рд┐рдкреЛрд░реНрдЯ рдХреЗрд╡рд▓ рд╢реИрдХреНрд╖рд┐рдХ рдПрд╡рдВ рд╕реВрдЪрдирд╛ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕реНрддреБрдд рдХреА рдЧрдИ рд╣реИред")
print("")
print("рд╕рд╛рджрд░,")
print("Ultimate Brain Market System")
